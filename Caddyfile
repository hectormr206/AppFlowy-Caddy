# Este Caddyfile está modificado para funcionar con el dominio por defecto de Railway.

# Usaremos una variable de entorno para el dominio, que Railway nos proporcionará.
{$CADDY_DOMAIN} {

    # Ruta para el backend principal de AppFlowy
    # Todas las peticiones a /api/* irán al servicio appflowy-cloud
    reverse_proxy /api* {$APPFLOWY_CLOUD_HOST}:{$APPFLOWY_CLOUD_PORT}

    # Ruta para la autenticación
    # Todas las peticiones a /gotrue/* irán al servicio de autenticación
    reverse_proxy /gotrue* {$GOTRUE_HOST}:{$GOTRUE_PORT}

    # Ruta para el almacenamiento de archivos (MinIO)
    # Todas las peticiones a /minio/* irán al servicio de MinIO
    reverse_proxy /minio* {$MINIO_HOST}:{$MINIO_API_PORT}
}